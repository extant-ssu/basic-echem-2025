<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œ3ê°•: ë°ì´í„° ë³´ëŠ” ë²• | ìˆ­ì‹¤ëŒ€ í™”í•™ê³¼</title>
    
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root { --primary: #667eea; --secondary: #764ba2; --accent: #ff9f43; --text-dark: #333; --bg-light: #f8f9fa; }
        body { font-family: 'Noto Sans KR', sans-serif; background: var(--bg-light); color: var(--text-dark); line-height: 1.6; margin: 0; padding: 0; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        .nav-header { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; padding: 20px; border-radius: 0 0 20px 20px; margin-bottom: 40px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); }
        .home-btn { color: white; text-decoration: none; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        section { background: white; border-radius: 20px; padding: 40px; margin-bottom: 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
        h2 { border-left: 5px solid var(--primary); padding-left: 15px; color: var(--secondary); margin-top: 0; }
        .concept-box { background: #eef2ff; border-left: 5px solid var(--primary); padding: 20px; border-radius: 5px; margin: 20px 0; }
        .plot-container { width: 100%; background: white; border: 1px solid #ddd; border-radius: 15px; margin: 20px 0; padding: 10px; }
        .control-panel { background: #333; color: white; padding: 20px; border-radius: 15px; margin-top: 20px; }
        .slider-group { margin-bottom: 15px; display: flex; align-items: center; gap: 15px; }
        .slider-group label { min-width: 180px; font-weight: bold; }
        .slider-group input { flex-grow: 1; cursor: pointer; }
        .slider-value { min-width: 60px; text-align: right; color: var(--accent); font-weight: bold;}
        .analogy-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .analogy-card { background: #fff; border: 1px solid #eee; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .analogy-img { font-size: 3em; margin-bottom: 15px; color: var(--primary); }
        .prof-tip { background: #fff3cd; border: 1px solid #ffeeba; color: #856404; padding: 15px; border-radius: 10px; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="container">
        <nav class="nav-header">
            <div>
                <h1 style="margin:0; font-size:1.5em;">ğŸ“Š 03ê°•: ë°ì´í„° ë³´ëŠ” ë²•</h1>
                <p style="margin:5px 0 0 0; opacity:0.9;">Nyquist & Bode Plot ì™„ì „ ì •ë³µ</p>
            </div>
            <a href="index.html" class="home-btn"><i class="fas fa-arrow-left"></i> ê°•ì˜ ëª©ë¡</a>
        </nav>

        <section>
            <h2>1. Nyquist Plot: ì„í”¼ë˜ìŠ¤ì˜ ì§€ë„</h2>
            <p>EIS ë°ì´í„°ë¥¼ ë°›ìœ¼ë©´ ê°€ì¥ ë¨¼ì € ë³´ê²Œ ë˜ëŠ” ê·¸ë˜í”„ì…ë‹ˆë‹¤. ë³µì†Œìˆ˜ í‰ë©´ì— ì‹¤ìˆ˜ë¶€($Z'$)ì™€ í—ˆìˆ˜ë¶€($-Z''$)ë¥¼ ì°ì€ ê²ƒì…ë‹ˆë‹¤.</p>

            <div class="analogy-grid">
                <div class="analogy-card">
                    <div class="analogy-img"><i class="fas fa-map-marked-alt"></i></div>
                    <h4>ìœ„ì—ì„œ ë³¸ ì‚° (ì§€ë„)</h4>
                    <p>ì‚°ì˜ ë†’ë‚®ì´(ì£¼íŒŒìˆ˜)ëŠ” ì˜ ì•ˆ ë³´ì´ì§€ë§Œ,<br><strong>ì „ì²´ì ì¸ ì§€í˜•(ë°˜ì‘ ê²½ë¡œ)</strong>ì´ í•œëˆˆì— ë“¤ì–´ì˜µë‹ˆë‹¤.</p>
                </div>
                <div class="analogy-card">
                    <div class="analogy-img"><i class="fas fa-chart-line"></i></div>
                    <h4>í™”í•™ì  ì˜ë¯¸</h4>
                    <p>Xì¶•: <strong>ì €í•­ ì„±ë¶„</strong> (ì–¼ë§ˆë‚˜ ë§‰íˆëŠ”ê°€)<br>Yì¶•: <strong>ìš©ëŸ‰ ì„±ë¶„</strong> (ì–¼ë§ˆë‚˜ ìŒ“ì´ëŠ”ê°€)</p>
                </div>
            </div>
        </section>

        <section>
            <h2>2. Bode Plot: ìˆ¨ê²¨ì§„ ì£¼íŒŒìˆ˜ ì°¾ê¸°</h2>
            <div class="concept-box">
                <p>Nyquist Plotì€ <strong>"ì£¼íŒŒìˆ˜"</strong> ì •ë³´ë¥¼ ìƒì–´ë²„ë¦½ë‹ˆë‹¤. ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ Bode Plotì„ í•¨ê»˜ ë´ì•¼ í•©ë‹ˆë‹¤.</p>
            </div>
        </section>

        <section>
            <h2>3. ğŸ® ì¸í„°ë™í‹°ë¸Œ ì‹¤ìŠµ</h2>
            <p>ì•„ë˜ ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ íŒŒë¼ë¯¸í„°ê°€ ë³€í•  ë•Œ ê·¸ë˜í”„ê°€ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
            
            <div class="prof-tip">
                <strong>ğŸ‘¨â€ğŸ« êµìˆ˜ë‹˜ì˜ ê°€ì´ë“œ:</strong><br>
                ë°˜ì‘ ì €í•­($R_{ct}$)ì„ í‚¤ìš°ë©´ Nyquistì˜ ë°˜ì›ì´ ì»¤ì§‘ë‹ˆë‹¤. ì´ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤!
            </div>

            <div class="plot-container">
                <div id="nyquistPlot" style="width:100%; height:400px;"></div>
                <div style="display:flex; flex-wrap:wrap;">
                    <div id="bodeMagPlot" style="flex:1; min-width:300px; height:300px;"></div>
                    <div id="bodePhasePlot" style="flex:1; min-width:300px; height:300px;"></div>
                </div>
            </div>

            <div class="control-panel">
                <div class="slider-group">
                    <label>ìš©ì•¡ ì €í•­ ($R_s$)</label>
                    <input type="range" id="rsSlider" min="1" max="100" value="10" step="1">
                    <span id="rsValue" class="slider-value">10 Î©</span>
                </div>
                <div class="slider-group">
                    <label>ì „í•˜ ì „ë‹¬ ì €í•­ ($R_{ct}$)</label>
                    <input type="range" id="rctSlider" min="10" max="1000" value="100" step="10">
                    <span id="rctValue" class="slider-value">100 Î©</span>
                </div>
                <div class="slider-group">
                    <label>ì´ì¤‘ì¸µ ì»¤íŒ¨ì‹œí„´ìŠ¤ ($C_{dl}$)</label>
                    <input type="range" id="cdlSlider" min="1" max="100" value="20" step="1">
                    <span id="cdlValue" class="slider-value">20 Î¼F</span>
                </div>
            </div>
        </section>

        <p style="text-align: center; margin-top: 30px;">
            <a href="lecture4_fitting.html" style="background: var(--primary); color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; font-weight: bold;">ë‹¤ìŒ ê°•ì˜ â†’</a>
        </p>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let Rs = 10;
            let Rct = 100;
            let Cdl = 20 * 1e-6;

            const freqs = [];
            for(let i = 5; i >= -2; i -= 0.1) {
                freqs.push(Math.pow(10, i));
            }

            function calculateImpedance() {
                const Z_real = [];
                const Z_imag = [];
                const Z_mag = [];
                const Z_phase = [];

                freqs.forEach(f => {
                    const w = 2 * Math.PI * f;
                    const denom = 1 + Math.pow(w * Rct * Cdl, 2);
                    
                    const real = Rs + Rct / denom;
                    const imag = -(w * Rct * Rct * Cdl) / denom;

                    Z_real.push(real);
                    Z_imag.push(-imag); // Nyquist Yì¶• (ìŒì˜ í—ˆìˆ˜ë¶€)
                    
                    const mag = Math.sqrt(real * real + imag * imag);
                    const phase = Math.atan2(imag, real) * (180 / Math.PI);

                    Z_mag.push(mag);
                    Z_phase.push(-phase);
                });

                return { Z_real, Z_imag, Z_mag, Z_phase };
            }

            function updatePlots() {
                const data = calculateImpedance();

                // Nyquist Plot
                Plotly.newPlot('nyquistPlot', [{
                    x: data.Z_real, y: data.Z_imag, mode: 'markers+lines',
                    marker: { color: freqs, colorscale: 'Jet', showscale: false },
                    line: { color: '#667eea', width: 3 }, type: 'scatter', name: 'Data'
                }], {
                    title: '<b>Nyquist Plot</b>',
                    xaxis: { title: "Z' (Real) / Î©", zeroline: false },
                    yaxis: { title: "-Z'' (Imaginary) / Î©", scaleanchor: "x", scaleratio: 1 },
                    hovermode: 'closest', plot_bgcolor: '#f8f9fa'
                }, {responsive: true});

                // Bode Magnitude
                Plotly.newPlot('bodeMagPlot', [{
                    x: freqs, y: data.Z_mag, type: 'scatter', mode: 'lines',
                    line: { color: '#764ba2', width: 3 }, name: '|Z|'
                }], {
                    title: '<b>Bode Plot: í¬ê¸°</b>',
                    xaxis: { type: 'log', title: 'Frequency (Hz)', autorange: 'reversed' },
                    yaxis: { type: 'log', title: '|Z| (Î©)' }, margin: { t: 40, b: 40, l: 50, r: 20 }
                }, {responsive: true});

                // Bode Phase
                Plotly.newPlot('bodePhasePlot', [{
                    x: freqs, y: data.Z_phase, type: 'scatter', mode: 'lines',
                    line: { color: '#ff9f43', width: 3 }, name: 'Phase'
                }], {
                    title: '<b>Bode Plot: ìœ„ìƒ</b>',
                    xaxis: { type: 'log', title: 'Frequency (Hz)' },
                    yaxis: { title: '-Phase (Degree)', range: [0, 90] }, margin: { t: 40, b: 40, l: 50, r: 20 }
                }, {responsive: true});
            }

            document.getElementById('rsSlider').addEventListener('input', function(e) { 
                Rs = parseFloat(e.target.value); document.getElementById('rsValue').innerText = Rs + " Î©"; updatePlots(); 
            });
            document.getElementById('rctSlider').addEventListener('input', function(e) { 
                Rct = parseFloat(e.target.value); document.getElementById('rctValue').innerText = Rct + " Î©"; updatePlots(); 
            });
            document.getElementById('cdlSlider').addEventListener('input', function(e) { 
                Cdl = parseFloat(e.target.value) * 1e-6; document.getElementById('cdlValue').innerText = e.target.value + " Î¼F"; updatePlots(); 
            });

            // ì´ˆê¸° ì‹¤í–‰
            updatePlots();
            
            // ë¦¬ì‚¬ì´ì§• ëŒ€ì‘
            window.addEventListener('resize', function() {
                Plotly.Plots.resize('nyquistPlot');
                Plotly.Plots.resize('bodeMagPlot');
                Plotly.Plots.resize('bodePhasePlot');
            });
        });
    </script>
</body>
</html>