<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œ6ê°•: ì‹¤í—˜ ë…¸í•˜ìš° & íŠ¸ëŸ¬ë¸”ìŠˆíŒ… | ìˆ­ì‹¤ëŒ€ í™”í•™ê³¼</title>
    
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root { --primary: #667eea; --secondary: #764ba2; --accent: #ff9f43; --danger: #ff7675; --text-dark: #333; --bg-light: #f8f9fa; }
        body { font-family: 'Noto Sans KR', sans-serif; background: var(--bg-light); color: var(--text-dark); line-height: 1.6; margin: 0; padding: 0; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        .nav-header { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; padding: 20px; border-radius: 0 0 20px 20px; margin-bottom: 40px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); }
        .home-btn { color: white; text-decoration: none; font-weight: bold; }
        
        section { background: white; border-radius: 20px; padding: 40px; margin-bottom: 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
        h2 { border-left: 5px solid var(--primary); padding-left: 15px; color: var(--secondary); margin-top: 0; }

        /* ì²´í¬ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .checklist-container { background: #eef2ff; padding: 20px; border-radius: 15px; border: 2px dashed var(--primary); }
        .checklist-item { margin: 10px 0; font-size: 1.1em; display: flex; align-items: center; cursor: pointer; }
        .checklist-item input { margin-right: 15px; transform: scale(1.5); cursor: pointer; }
        .status-msg { margin-top: 20px; font-weight: bold; text-align: center; color: var(--secondary); font-size: 1.2em; min-height: 30px;}

        /* íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë²„íŠ¼ */
        .trouble-btn-group { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
        .trouble-btn {
            flex: 1; padding: 15px; border: none; border-radius: 10px;
            background: #f1f3f5; font-weight: bold; cursor: pointer; transition: 0.3s;
            display: flex; flex-direction: column; align-items: center; gap: 5px;
        }
        .trouble-btn i { font-size: 1.5em; color: #666; }
        .trouble-btn:hover { background: #e9ecef; }
        .trouble-btn.active { background: var(--danger); color: white; box-shadow: 0 5px 15px rgba(255, 118, 117, 0.4); }
        .trouble-btn.active i { color: white; }
        .trouble-btn.correct { background: #00b894; color: white; }
        .trouble-btn.correct i { color: white; }

        .solution-box { background: #dfe6e9; padding: 20px; border-radius: 10px; margin-top: 20px; display: none; }
        .solution-box.show { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .prof-tip { background: #fff3cd; border: 1px solid #ffeeba; color: #856404; padding: 15px; border-radius: 10px; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="container">
        <nav class="nav-header">
            <div>
                <h1 style="margin:0; font-size:1.5em;">ğŸ”§ 06ê°•: ì‹¤í—˜ ë…¸í•˜ìš° & íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h1>
                <p style="margin:5px 0 0 0; opacity:0.9;">ë§í•œ ë°ì´í„° ì‚´ë ¤ë‚´ê¸° & ì‹¤ìˆ˜ ë°©ì§€</p>
            </div>
            <a href="index.html" class="home-btn"><i class="fas fa-home"></i> ë©”ì¸ìœ¼ë¡œ</a>
        </nav>

        <section>
            <h2>1. ì‹¤í—˜ ì‹œì‘ ì „! 5ì´ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
            <p>ë°ì´í„°ê°€ ì´ìƒí•˜ë‹¤ë©´ ê¸°ê³„ ê³ ì¥ì´ ì•„ë‹ˆë¼ 99%ëŠ” ì´ ë¬¸ì œì…ë‹ˆë‹¤.</p>
            
            <div class="checklist-container">
                <label class="checklist-item"><input type="checkbox" onchange="checkStatus()"> ğŸ”Œ 1. Reference Electrode(ê¸°ì¤€ì „ê·¹) ì•ˆì— ê¸°í¬ê°€ ì—†ëŠ”ê°€?</label>
                <label class="checklist-item"><input type="checkbox" onchange="checkStatus()"> ğŸŠ 2. ì•…ì–´ í´ë¦½ì´ ì „ê·¹ì„ ë‹¨ë‹¨í•˜ê²Œ ë¬¼ê³  ìˆëŠ”ê°€? (ë¶€ì‹ í™•ì¸)</label>
                <label class="checklist-item"><input type="checkbox" onchange="checkStatus()"> âš¡ 3. Ground(ì ‘ì§€) ì¼€ì´ë¸”ì´ ì¥ë¹„ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ê°€?</label>
                <label class="checklist-item"><input type="checkbox" onchange="checkStatus()"> ğŸ“ 4. ì¼€ì´ë¸”ë¼ë¦¬ ê¼¬ì—¬ìˆì§€ ì•Šì€ê°€? (ì¸ë•í„´ìŠ¤ ë°©ì§€)</label>
                <label class="checklist-item"><input type="checkbox" onchange="checkStatus()"> ğŸ§ª 5. ì…€ ë‚´ë¶€ì— ê¸°í¬ê°€ ì „ê·¹ì„ ê°€ë¦¬ì§€ ì•Šì•˜ëŠ”ê°€?</label>
                
                <div id="checkStatusMsg" class="status-msg">ì²´í¬ë¥¼ ì™„ë£Œí•´ì£¼ì„¸ìš”...</div>
            </div>
        </section>

        <section>
            <h2>2. OCP(ê°œë°© íšŒë¡œ ì „ì••)ì˜ ì¤‘ìš”ì„±</h2>
            <p>EISëŠ” í‰í˜• ìƒíƒœë¥¼ ì „ì œë¡œ í•©ë‹ˆë‹¤. ì „ì••ì´ ê³„ì† ë³€í•˜ê³  ìˆë‹¤ë©´(Drifting), ì¸¡ì •ëœ ì„í”¼ë˜ìŠ¤ëŠ” ê°€ì§œì…ë‹ˆë‹¤.</p>

            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 300px;">
                    <div id="ocpPlot" style="width:100%; height:300px;"></div>
                </div>
                <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 10px;">
                    <button class="trouble-btn correct" onclick="startOCP(true)">
                        <i class="fas fa-check-circle"></i> ì•ˆì •ëœ ìƒíƒœ (Good)
                    </button>
                    <button class="trouble-btn active" style="background:var(--danger);" onclick="startOCP(false)">
                        <i class="fas fa-times-circle"></i> ë¶ˆì•ˆì • ìƒíƒœ (Bad)
                    </button>
                    <div class="prof-tip">
                        <strong>ğŸ‘¨â€ğŸ« êµìˆ˜ë‹˜ íŒ:</strong><br>
                        "ì‹¤í—˜ ì‹œì‘ ì „ ìµœì†Œ 10ë¶„~30ë¶„ì€ ê¸°ë‹¤ë¦¬ì„¸ìš”. ì „ì•• ë³€í™”ê°€ <strong>ë¶„ë‹¹ 1mV ì´í•˜</strong>ê°€ ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì´ ì •ì„ì…ë‹ˆë‹¤."
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>3. ğŸš‘ ë°ì´í„° êµ¬ì¡°ëŒ€ (Troubleshooting)</h2>
            <p>ê·¸ë˜í”„ ëª¨ì–‘ë§Œ ë´ë„ ë­ê°€ ì˜ëª»ëëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ìƒí™©ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.</p>

            <div class="trouble-btn-group">
                <button class="trouble-btn" onclick="showProblem('inductance')">
                    <i class="fas fa-level-down-alt"></i> ê³ ì£¼íŒŒ ê¼¬ë¦¬ (ì¸ë•í„´ìŠ¤)
                </button>
                <button class="trouble-btn" onclick="showProblem('noise')">
                    <i class="fas fa-signature"></i> ì €ì£¼íŒŒ ë…¸ì´ì¦ˆ (í”ë“¤ë¦¼)
                </button>
                <button class="trouble-btn" onclick="showProblem('artifact')">
                    <i class="fas fa-ghost"></i> ì—‰ëš±í•œ ë°˜ì› (ì•„í‹°íŒ©íŠ¸)
                </button>
                <button class="trouble-btn correct" onclick="showProblem('good')">
                    <i class="fas fa-thumbs-up"></i> ì •ìƒ ë°ì´í„°
                </button>
            </div>

            <div id="troublePlot" style="width:100%; height:400px; border: 1px solid #ddd; border-radius: 10px;"></div>

            <div id="sol_inductance" class="solution-box">
                <h3 style="color: var(--danger);"><i class="fas fa-exclamation-triangle"></i> ì›ì¸: ì¼€ì´ë¸” ë¬¸ì œ</h3>
                <p>ê·¸ë˜í”„ê°€ xì¶• ì•„ë˜(4ì‚¬ë¶„ë©´)ë¡œ ë‚´ë ¤ê°”ë‚˜ìš”? <strong>ì¼€ì´ë¸”ì´ ë„ˆë¬´ ê¸¸ê±°ë‚˜ ê¼¬ì—¬ìˆìœ¼ë©´</strong> ì½”ì¼ì²˜ëŸ¼ ì‘ìš©í•´ ì¸ë•í„´ìŠ¤(L) ì„±ë¶„ì´ ìƒê¹ë‹ˆë‹¤.</p>
                <p><strong>âœ… í•´ê²°ì±…:</strong> ì¼€ì´ë¸”ì„ ì§§ê²Œ í•˜ê±°ë‚˜, ê¼¬ì¸ ì„ ì„ í’€ì–´ì£¼ì„¸ìš”. ê³ ì£¼íŒŒ ëŒ€ì—­(100kHz ì´ìƒ)ì„ ë¬´ì‹œí•˜ëŠ” ê²ƒë„ ë°©ë²•ì…ë‹ˆë‹¤.</p>
            </div>

            <div id="sol_noise" class="solution-box">
                <h3 style="color: var(--danger);"><i class="fas fa-exclamation-triangle"></i> ì›ì¸: ì™¸ë¶€ ì§„ë™ ë˜ëŠ” ì¥ë¹„ í•œê³„</h3>
                <p>ì˜¤ë¥¸ìª½ ë(ì €ì£¼íŒŒ)ì´ ë§ˆêµ¬ í”ë“¤ë¦¬ë‚˜ìš”? ì €ì£¼íŒŒëŠ” ì¸¡ì • ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë ¤ì„œ <strong>ì£¼ë³€ ì§„ë™, íŒí”„ ì†ŒìŒ, ì „ê¸° ë…¸ì´ì¦ˆ</strong>ì— ì·¨ì•½í•©ë‹ˆë‹¤.</p>
                <p><strong>âœ… í•´ê²°ì±…:</strong> íŒ¨ëŸ¬ë°ì´ ì¼€ì´ì§€(Faraday Cage)ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, AC ì§„í­ì„ ì‚´ì§(5mV -> 10mV) í‚¤ì›Œë³´ì„¸ìš”.</p>
            </div>

            <div id="sol_artifact" class="solution-box">
                <h3 style="color: var(--danger);"><i class="fas fa-exclamation-triangle"></i> ì›ì¸: Reference ì „ê·¹ ë¬¸ì œ</h3>
                <p>ì´ìƒí•œ ê¼¬ë¦¬ê°€ ìƒê¸°ê±°ë‚˜ ê·¸ë˜í”„ê°€ ì°Œê·¸ëŸ¬ì¡Œë‚˜ìš”? <strong>Reference ì „ê·¹ ë‚´ë¶€ì˜ ìš©ì•¡ì´ ë§ëê±°ë‚˜ ê¸°í¬ê°€ ì°¼ì„ í™•ë¥ </strong>ì´ ë†’ìŠµë‹ˆë‹¤.</p>
                <p><strong>âœ… í•´ê²°ì±…:</strong> ê¸°ì¤€ ì „ê·¹ì„ í”ë“¤ì–´ ê¸°í¬ë¥¼ ë¹¼ê±°ë‚˜, ë‚´ë¶€ ì¶©ì „ ìš©ì•¡(Filling Solution)ì„ ë¦¬í•„í•˜ì„¸ìš”.</p>
            </div>
            
             <div id="sol_good" class="solution-box">
                <h3 style="color: #00b894;"><i class="fas fa-check"></i> ì™„ë²½í•©ë‹ˆë‹¤!</h3>
                <p>ë§¤ë„ëŸ¬ìš´ ë°˜ì›ê³¼ ê¹¨ë—í•œ í™•ì‚° ì§ì„ . ì•„ì£¼ í›Œë¥­í•œ ë°ì´í„°ì…ë‹ˆë‹¤. ì´ì œ í”¼íŒ…í•˜ëŸ¬ ê°€ì‹œì£ !</p>
            </div>

        </section>

        <section style="text-align: center; background: #eef2ff;">
            <h3>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ê¸°ì´ˆì „ê¸°í™”í•™ EIS ê³¼ì •ì„ ëª¨ë‘ ìˆ˜ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤.</h3>
            <p>ì´ì œ ì—¬ëŸ¬ë¶„ì€ ë‘ë ¤ì›€ ì—†ì´ ì„í”¼ë˜ìŠ¤ ë°ì´í„°ë¥¼ ì°ê³  í•´ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <a href="index.html" style="display:inline-block; margin-top:10px; padding:15px 30px; background:var(--primary); color:white; text-decoration:none; border-radius:25px; font-weight:bold;">ê°•ì˜ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
        </section>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // --- 1. ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¡œì§ ---
            window.checkStatus = function() {
                const checkboxes = document.querySelectorAll('.checklist-item input');
                const allChecked = Array.from(checkboxes).every(cb => cb.checked);
                const msg = document.getElementById('checkStatusMsg');
                
                if(allChecked) {
                    msg.innerHTML = "âœ¨ ì‹¤í—˜ ì¤€ë¹„ ì™„ë£Œ! ìì‹  ìˆê²Œ Start ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”! âœ¨";
                    msg.style.color = "#00b894";
                } else {
                    msg.innerHTML = "ì•„ì§ ì¤€ë¹„ê°€ ëœ ë˜ì—ˆìŠµë‹ˆë‹¤. í•­ëª©ì„ í™•ì¸í•˜ì„¸ìš”.";
                    msg.style.color = "#ff7675";
                }
            };

            // --- 2. OCP ì‹œë®¬ë ˆì´ì…˜ ---
            window.startOCP = function(isStable) {
                const t = [];
                const v = [];
                for(let i=0; i<600; i++) { // 10ë¶„(600ì´ˆ) ì‹œë®¬ë ˆì´ì…˜
                    t.push(i);
                    let voltage = 0.5; // 0.5V ê¸°ì¤€
                    if(isStable) {
                        // ì•½ê°„ì˜ ë…¸ì´ì¦ˆë§Œ ìˆìŒ
                        voltage += (Math.random() - 0.5) * 0.002;
                    } else {
                        // ë“œë¦¬í”„íŠ¸ ë°œìƒ (ì ì  ë–¨ì–´ì§) + ë…¸ì´ì¦ˆ
                        voltage = 0.5 - (i * 0.0002) + (Math.random() - 0.5) * 0.005;
                    }
                    v.push(voltage);
                }

                const color = isStable ? '#00b894' : '#ff7675';
                const title = isStable ? 'ì•ˆì •ëœ OCP (Good)' : 'ë¶ˆì•ˆì •í•œ OCP (Drifting - Bad)';

                Plotly.newPlot('ocpPlot', [{
                    x: t, y: v, type: 'scatter', mode: 'lines',
                    line: {color: color, width: 2}
                }], {
                    title: title,
                    xaxis: {title: 'ì‹œê°„ (ì´ˆ)'},
                    yaxis: {title: 'ì „ìœ„ (V)', range: [0.35, 0.6]},
                    margin: {t:40, b:40, l:50, r:20}
                }, {responsive: true});
            };
            startOCP(true); // ì´ˆê¸°ê°’

            // --- 3. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°¤ëŸ¬ë¦¬ ---
            window.showProblem = function(type) {
                // ì„¤ëª… ë°•ìŠ¤ ì œì–´
                document.querySelectorAll('.solution-box').forEach(box => box.classList.remove('show'));
                if(document.getElementById('sol_' + type)) {
                    document.getElementById('sol_' + type).classList.add('show');
                }

                // ë°ì´í„° ìƒì„±
                let Rs = 10;
                let Rct = 100;
                let Cdl = 0.0001;
                const x = [], y = [];
                
                // ì£¼íŒŒìˆ˜: 100kHz ~ 0.1Hz
                for(let f=100000; f>=0.1; f/=1.5) {
                    const w = 2 * Math.PI * f;
                    const denom = 1 + Math.pow(w * Rct * Cdl, 2);
                    let real = Rs + Rct/denom;
                    let imag = (w * Rct * Rct * Cdl)/denom;

                    // ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ ì£¼ì…
                    if(type === 'inductance' && f > 1000) {
                        // ê³ ì£¼íŒŒì—ì„œ ì¸ë•í„´ìŠ¤(L)ëŠ” +Im(Z)ë¥¼ ë§Œë“¦ -> Nyquist(-Im)ì—ì„œëŠ” ì•„ë˜ë¡œ ë‚´ë ¤ê°
                        // Z_L = jwL
                        const L = 5e-6; // 5 micro Henry
                        imag -= w * L * 500; // ì‹œê°ì  íš¨ê³¼ë¥¼ ìœ„í•´ ê³¼ì¥
                    } 
                    else if(type === 'noise' && f < 10) {
                        // ì €ì£¼íŒŒ ë…¸ì´ì¦ˆ
                        const noiseLevel = 5 * (10/f); // ì£¼íŒŒìˆ˜ê°€ ë‚®ì„ìˆ˜ë¡ ë…¸ì´ì¦ˆ ì‹¬í•¨
                        real += (Math.random() - 0.5) * noiseLevel;
                        imag += (Math.random() - 0.5) * noiseLevel;
                    }
                    else if(type === 'artifact') {
                        // ì´ìƒí•œ ì°Œê·¸ëŸ¬ì§ (Ref ì „ê·¹ ë¬¸ì œ ë“±)
                        if(f < 100 && f > 1) {
                            real += 20 * Math.sin(f);
                            imag += 10 * Math.cos(f);
                        }
                    }

                    x.push(real);
                    y.push(imag);
                }

                const trace = {
                    x: x, y: y, mode: 'markers+lines',
                    marker: {size: 6, color: type === 'good' ? '#0984e3' : '#d63031'},
                    line: {color: '#b2bec3', width: 1}
                };

                Plotly.newPlot('troublePlot', [trace], {
                    title: 'Nyquist Plot ì§„ë‹¨',
                    xaxis: {title: "Z' (Î©)", range: [0, 150]},
                    yaxis: {title: "-Z'' (Î©)", scaleanchor: "x", scaleratio: 1, range: [-20, 80]}, // ì¸ë•í„´ìŠ¤ ë³´ì´ê²Œ yì¶• ìŒìˆ˜ í¬í•¨
                    margin: {t:40, b:40, l:50, r:20}
                }, {responsive: true});
            };
            
            showProblem('good'); // ì´ˆê¸°ê°’
        });
    </script>
</body>
</html>